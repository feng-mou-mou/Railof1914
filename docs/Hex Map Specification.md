# Hex Map Specification – France / Belgium / Germany Demo

> **Version:** 1.2  
> **Last updated:** 2025-05-04  
> **Contact:** Game-Design Team

---

## 1. Map Overview

本地图基于点顶朝上的六边形格网，展示了法国 (France)、比利时 (Belgium) 和德国 (Germany) 三个国家的领土分布与内部行政区划。开发者可依此格式化存储与渲染。

| 要素               | 样式                                  | 描述                                                       |
|--------------------|---------------------------------------|------------------------------------------------------------|
| **六边形格**       | 白色填充，无边框                      | 所有可行走或可操作的格子；黑色不可操作地块已删除。         |
| **外部国家边界**   | 实线，3 px 宽                         | 法国：蓝色半透明 `#0072B5`；<br>比利时：浅红半透明 `#FF9999`；<br>德国：红色半透明 `#D62728` |
| **内部区域分界**   | 灰色虚线 `(4 px on / 4 px off)`       | 每条**闭合**虚线围成一块子区；子区即内部“行政区域”。       |
| **坐标系**         | 点顶六边形，使用“轴坐标” (axial)      | `(q, r)`：`q` 向东增长，`r` 向南东增长。                   |

---

## 2. 区域划分

### 2.1 子区数量

| 国家             | 子区数量 |
|------------------|----------|
| France (法国)    | 7        |
| Belgium (比利时) | 1        |
| Germany (德国)   | 6        |

> **说明**：内部灰色虚线的每个**闭合回路**都定义了一个子区。  
> 总计：14 个子区 (7 + 1 + 6)。

### 2.2 子区列表与示例坐标

每个子区可用一组 `(q, r)` 轴坐标的大致中心点标识，方便配置与调试。请根据最终资源精确标注。

| 子区 ID | 国家     | 示例轴坐标 (q, r) |
|---------|----------|--------------------|
| FR-1    | France   | (3, 4)             |
| FR-2    | France   | (5, 8)             |
| FR-3    | France   | (8, 6)             |
| FR-4    | France   | (7, 10)            |
| FR-5    | France   | (4, 12)            |
| FR-6    | France   | (9, 13)            |
| FR-7    | France   | (11, 11)           |
| BE-1    | Belgium  | (13, 6)            |
| GE-1    | Germany  | (16, 4)            |
| GE-2    | Germany  | (18, 5)            |
| GE-3    | Germany  | (17, 8)            |
| GE-4    | Germany  | (20, 3)            |
| GE-5    | Germany  | (18, 11)           |
| GE-6    | Germany  | (20, 9)            |

---

## 3. 数据结构与操作

> **说明**：所有游戏逻辑均在单个六边形单元（hex）层面执行，**region** 字段仅用于分区分组、AI 判定或高亮显示，不影响格子级操作。

```jsonc
{
  "q": 12,               // 轴坐标列
  "r": 5,                // 轴坐标行
  "nation": "FR",        // FR | BE | DE
  "region": "FR-3",      // 子区 ID
  "terrain": "plains",   // 可扩展地形类型
  "entities": []         // 当前格内单位或物件列表
}

邻接关系
使用以下 6 个方向偏移量生成临近格：

方向	Δq	Δr
E	+1	0
SE	0	+1
SW	-1	+1
W	-1	0
NW	0	-1
NE	+1	-1

## 4. 渲染与交互

### 4.1绘制顺序

首先绘制所有白色填充的六边形面。

然后绘制灰色虚线的内部区域分界。

最后绘制国家外部实线边界（3 px）。

### 4.2 屏幕坐标 → 轴坐标 转换
对于点顶六边形，使用以下公式将屏幕 (x, y) 转为 (q, r)：
q = (√3/3 * x - 1/3 * y) / size
r = (2/3 * y) / size

### 4.3 分区边界提取

国家外边界：检查相邻两格 nation 不同或有一侧为空。
内部分界：根据 region 字段检测每个子区的闭合多边形。

## 5 势力划分
分为两个势力：
1. 德意志帝国（德国、比利时）
2. 法国

## 6 冲突地区划分
该地图双方的冲突地区：
德意志帝国：GE-3
法国：FR-3